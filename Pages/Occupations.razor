@page "/occupations"

<div class="occupations-main-menu-list">
    @foreach (var occupation in GetVisibleOccupations())
    {
       <div class="occupations-item hoverable">
            <div class="occupation-icon ">
                <img src="@occupation.ImagePath" class="occupations-circle-white" />
                @* <i class="fa-sharp fa-solid fa-location-dot occupations-circle-white"></i> *@
            </div>
            <div class="occupations-name">@occupation.Name</div>
        </div>
    }

    <div class="show-more-less-buttons hoverable-buttons">
        @if (visibleOccupationsCount < allOccupations.Count)
        {
            <button @onclick="ShowMore">Show More</button>
        }
        else
        {
            <button @onclick="ShowLess">Show Less</button>
        }
    </div>
</div>

@code {
    private int visibleOccupationsCount = 3; // Number of Occupations to show initially
    private List<OccupationItem> allOccupations; // Declare the field here

    private class OccupationItem
    {
        public string Name { get; set; }
        public string ImagePath  { get; set; }
    }

    protected override void OnInitialized()
    {
        allOccupations = GenerateAllOccupations(); // Initialize the field in the OnInitialized method
    }

    private List<OccupationItem> GenerateAllOccupations()
    {
        return new List<OccupationItem>
        {
            new OccupationItem { Name = "Management", ImagePath = "/icons/architecture.svg"},
            new OccupationItem { Name = "Business", ImagePath = "/icons/business.svg" },
            new OccupationItem { Name = "Tech", ImagePath = "/icons/tech.svg" },
            new OccupationItem { Name = "Architecture & Engineering", ImagePath = "/icons/architecture.svg" },
            new OccupationItem { Name = "Science", ImagePath = "/icons/science.svg" },
            new OccupationItem { Name = "Social Service", ImagePath = "/icons/social-service.svg" },
            new OccupationItem { Name = "Legal", ImagePath = "/icons/legal.svg" },
            new OccupationItem { Name = "Education", ImagePath = "/icons/education.svg" },
            new OccupationItem { Name = "Art & Entertainment", ImagePath = "/icons/entertainment.svg" },
            new OccupationItem { Name = "Healthcare", ImagePath = "/icons/healthcare.svg" },
            new OccupationItem { Name = "Healthcare Support", ImagePath = "/icons/healthcare-support.svg" },
            new OccupationItem { Name = "Security", ImagePath = "/icons/security.svg" },
            new OccupationItem { Name = "Food Preparation", ImagePath = "/icons/food-service.svg" },
            new OccupationItem { Name = "Building Maintenance", ImagePath = "/icons/building-maintenance.svg" },
            new OccupationItem { Name = "Personal Care", ImagePath = "/icons/personal-care.svg" },
            new OccupationItem { Name = "Sales", ImagePath = "/icons/sales.svg" },
            new OccupationItem { Name = "Office", ImagePath = "/icons/office.svg" },
            new OccupationItem { Name = "Farming", ImagePath = "/icons/farming.svg" },
            new OccupationItem { Name = "Construction", ImagePath = "/icons/construction.svg" },
            new OccupationItem { Name = "Installation & Maintenance", ImagePath = "/icons/installation.svg" },
            new OccupationItem { Name = "Manufacturing", ImagePath = "/icons/manufacturing.svg" },
            new OccupationItem { Name = "Transportation", ImagePath = "/icons/transportation.svg" },
            new OccupationItem { Name = "Military", ImagePath = "/icons/military.svg" },
        };
    }

    private List<OccupationItem> GetVisibleOccupations()
    {
        return allOccupations.Take(visibleOccupationsCount).ToList();
    }

    private void ShowMore()
    {
        visibleOccupationsCount += allOccupations.Count; // Increase the number of visible occupations
        if (visibleOccupationsCount > allOccupations.Count)
        {
            visibleOccupationsCount = allOccupations.Count;
        }
    }

    private void ShowLess()
    {
        visibleOccupationsCount = 3; // Show the initial number of occupations
    }

    // Added this method to handle the click event of the "Show More" button
}